# ~/.ssh/config - SSH client configuration
# WARN: first found option will be used
# NOTE: ssh -G host prints config relevant for host

# {{{ Hosts
Host codeberg.org
	User                    git
Host github.com
	User                    git
Host salsa.debian.org
	User                    git
	IdentityFile            ~/.ssh/keys/id_debian_ed25519
# }}}

# {{{ Includes
Include config_local*
# }}}

# {{{ Global
# matches only on Windows
# see: 
Match exec "exit ${IS_WINDOWS:-1}"
	# connection sharing not supported in ssh.exe
	ControlMaster           no
	ControlPath             none

Host *
	# ignore unknown configuration directives
	#IgnoreUnknown

	User                    blami
	IdentityFile            ~/.ssh/keys/id_blami_ed25519
	IdentityFile            ~/.ssh/keys/id_blami_rsa
	# only send keys for given host
	IdentitiesOnly          yes

	HashKnownHosts          yes
	VisualHostKey           yes
	StrictHostKeyChecking   ask
	VerifyHostKeyDNS        ask
	
	# agent
	AddKeysToAgent          yes
	ForwardAgent            yes
	
	# environment
	SendEnv                 TERM LANG LC_*
	
	# connection
	TcpKeepAlive            yes
	Compression             yes
	ConnectionAttempts      3
	ConnectTimeout          10
	ServerAliveCountMax     3
	ServerAliveInterval     120
	# NOTE: see above, disabled on Windows
	ControlMaster           auto
	ControlPath             ${XDG_RUNTIME_DIR}/.sshctrl%h%p%r

	PermitLocalCommand      no
	ExitOnForwardFailure    yes
# }}}
