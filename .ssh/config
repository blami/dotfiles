# ~/.ssh/config - SSH client configuration
# NOTE: ssh -G host prints config relevant for host

# {{{ Global
Host *
	# ignore unknown configuration directives
	IgnoreUnknown           yes

	IdentityFile            ~/.ssh/keys/id_blami_ed25519
	IdentityFile            ~/.ssh/keys/id_blami_rsa
	# only send keys for given host
	IdentitiesOnly          yes

	HashKnownHosts          yes
	VisualHostKey           yes
	StrictHostKeyChecking   ask
	VerifyHostKeyDNS        ask
	
	# agent
	AddKeysToAgent          yes
	ForwardAgent            yes
	
	# environment
	SendEnv                 TERM LANG LC_*
	
	# connection
	TcpKeepAlive            yes
	Compression             yes
	ConnectionAttempts      3
	ConnectTimeout          10
	ServerAliveCountMax     3
	ServerAliveInterval     120
	ControlMaster           auto
	# NOTE: ~/.run->$XDG_RUNTIME_DIR (see ~/.zshenv); env vars 8.4+
	ControlPath             ~/.run/sshctrl_%h%p%r

	PermitLocalCommand      no
	ExitOnForwardFailure    yes
	
# matches only on Windows
Match exec "exit ${IS_WINDOWS:-1}"
	# connection sharing not supported in ssh.exe
	ControlMaster           no
	ControlPath             none
# }}}

# {{{ Hosts
Host cb codeberg codeberg.org
	Hostname                codeberg.org
	User                    git
Host gh github github.com
	Hostname                github.com
	User                    git
Host deb debian debian.org salsa.debian.org
	Hostname                salsa.debian.org
	User                    git
	IdentityFile            ~/.ssh/keys/id_debian_ed25519
# }}}

# {{{ Includes
Include ~/.ssh/config_local
# }}}
