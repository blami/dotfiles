# ~/.zalias - Z-shell aliases

# {{{ Output redirects
alias NERR='2>|/dev/null'               # no stderr
alias NOUT='&>|/dev/null'               # no stdout
alias NALL='2>&1|/dev/null'             # no stdout+stderr

alias P='2>&1|$PAGER'                   # pipe all to pager (expand in shell)
alias L='|wc -l'                        # count lines
alias T='|tail -f'                      # tail and follow
[ "$OS" != 'sunos' ] && alias G='|grep' || alias G='|ggrep' # pipe to grep
# }}}


# {{{ Directories & Files
alias rm='rm -i'
# Color ls output if LS_COLOR set
[ ! -z $LS_COLORS ] && alias ls='ls --color=auto'
alias l='ls -a'
alias ll='ls -la'
alias l.='ls -d .*'
alias la='ls -a'
alias lO='ls -At1 && echo "--- Oldest ---"'
alias lN='ls -Art1 && echo "--- Newest ---"'
alias lt='tree -L 2 -d'
alias mkdir='mkdir -p'                  # create parent directories
alias path='echo -e ${PATH//:/\\n}'

# Directory shortcuts
alias ws="cd $HOME/ws"
alias src="cd $HOME/ws/src"
alias doc="cd $HOME/docs"
alias sand="cd $HOME/ws/sandbox"
alias etc='cd /etc'

# Disable globbing for some commands
alias find='noglob find'
alias grep='noglob grep'

# Checksums
alias sha='shasum -a 256'
alias sha1='shasum -a 1'
alias md5='md5sum'
# }}}


# {{{ Command history
alias c='clear'
alias clr='clear'
alias h='history'                       # list history
alias he='history -a'                   # export history
alias hi='history -n'                   # import history
# }}}


# {{{ Grep
# Color grep output if GREP_COLORS set
if [ ! -z $GREP_COLORS ]; then
    greps=('grep' 'egrep' 'fgrep')
    [ $OS = 'sunos' ] && greps=('ggrep' 'gegrep' 'gfgrep')
    for grep in $greps; do
        alias $grep="$grep --color=auto"
    done
    unset grep greps
fi
# }}}


# {{{ Text editing
alias vi='vim'
alias v='vim'
alias vimn='vim -u NONE'                # vim without configuration
alias tn='tr -d "\n"'                   # trim newlines
# }}}


# {{{ Date and time
alias d='date +"%a, %b %d, %Y %H:%M:%S%z%Z (day:%j, week:%V) %t%s"'
alias dutc='TZ=UTC d'
alias dcz='TZ=Europe/Prague d'
alias dny='TZ=America/New_York d'
alias djp='TZ=Asia/Tokyo d'
# }}}


# {{{ Processes
alias psmem10='ps aux | sort -nr -k 4 | head -10'
alias pscpu10='ps aux | sort -nr -k 3 | head -10'
                                        # top 10 mem/cpu eating processes
alias j='jobs -l'                       # list shell background jobs
alias q='exit'
# }}}


# {{{ Network
alias ports='netstat -tulanp'           # show listen ports
alias httph='curl -I -L'                # show HTTP headers (URL must follow)
[ -x /usr/bin/python3 ] && alias serve='python3 -m http.server' # serve current directory on port 8000

alias wget='wget -c'                    # resume downloads

# OpenSSL Certificates
# See: https://www.sslshopper.com/article-most-common-openssl-commands.html
# Print details about PEM/CSR
alias pem='openssl x509 -noout -text -in'
alias csr='openssl req -noout -text -verify -in'
# Explode PKCS7 and PKCS12 bundles to PEM
alias p7b='openssl pkcs7 -inform der -noout -text -in'
alias p12b='openssl pkcs12 -inform der -noout -text -in'
# }}}


# {{{ Admin commands
alias tmux='tmux -u'
alias t='tmux'
alias ta='tmux a'

# System commands
# }}}

# {{{ Coding
# VCS
# Git
alias g='git'
alias dfgit="git --git-dir=$HOME/.dfgit --work-tree=$HOME" # dfgit for .dfgit
# }}}


# {{{ Typos
# NOTE These are only typo corrections for typos I do very often
alias exot='exit'
alias exut='exit'
alias ccd='cd'
alias sl='ls'
# }}}


# {{{ Includes
# Local configuration
[ -r $HOME/.zalias_local ] && . $HOME/.zalias_local
[ -r $HOME/.zalias_$HOST ] && . $HOME/.zalias_$HOST

# Clear exit code (if any optional file doesn't exist)
builtin true
# }}}


# vim:set ft=zsh:
